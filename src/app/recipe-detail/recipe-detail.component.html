<article class="recipe">
  @if (recipe()) {
    <header class="recipe__header">
      <div class="recipe__header-top">
        <div class="recipe__header-text">
          <h2 class="recipe__title">
            {{ recipe()?.name }}
          </h2>

          <p class="recipe__description">
            {{ recipe()?.description }}
          </p>
        </div>
      </div>
    </header>

    <figure class="recipe__image">
      <img [src]="recipe()?.imgUrl" [alt]="recipe()?.name" />
    </figure>

    <section class="recipe__ingredients">
      <div class="recipe__ingredients-header">
        <h3 class="recipe__ingredients-title">Ingredienti</h3>
        <div class="recipe__servings-controls" role="group" aria-label="Porzioni">
          <button
            class="recipe__servings-btn"
            type="button"
            aria-label="Diminuisci porzioni"
            (click)="onDecrementServings()"
          >
            -
          </button>
          <span class="recipe__servings-value" aria-live="polite">
            {{ servings() }}
          </span>
          <button
            class="recipe__servings-btn"
            type="button"
            aria-label="Aumenta porzioni"
            (click)="onIncrementServings()"
          >
            +
          </button>
        </div>
      </div>
      <ul class="recipe__ingredients-list">
        @for (ingredient of adjustedIngredients(); track $index) {
          <li class="recipe__ingredient">
            <span class="recipe__ingredient-name">
              {{ ingredient.name }}
            </span>
            <span class="recipe__ingredient-qty">
              {{ ingredient.quantity }} {{ ingredient.unit }}
            </span>
          </li>
        }
      </ul>
    </section>
  } @else {
    <div class="recipe__empty">
      <p class="recipe__empty-title">Nessuna ricetta selezionata</p>
      <p class="recipe__empty-text">Scegli una ricetta dalla lista per vederne il dettaglio.</p>
    </div>
  }
</article>
